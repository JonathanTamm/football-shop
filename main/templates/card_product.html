{% load static %}
<article class="bg-gray-900 text-white rounded-xl border border-gray-700 hover:shadow-2xl hover:shadow-green-700/20 transition-shadow duration-300 overflow-hidden">
  <!-- Thumbnail -->
  <div class="relative overflow-hidden bg-gray-800 flex items-center justify-center p-4">
    {% if product.thumbnail %}
      <img src="{{ product.thumbnail }}" alt="{{ product.name }}" class="w-full h-auto max-h-56 object-contain rounded-md shadow-sm mx-auto">
    {% else %}
      <div class="w-full h-56 bg-gray-700 rounded-md"></div>
    {% endif %}
  </div>

  <!-- Content -->
  <div class="p-5">
    <div class="flex items-center text-sm text-gray-400 gap-4 mb-4">
      <time datetime="{{ product.created_at|date:'c' }}">{{ product.created_at|date:"M j, Y" }}</time>
      <span>â€¢ {{ product.product_views }} views</span>
    </div>

    <!-- Name above price -->
    <h3 class="text-xl font-semibold text-white mb-2">{{ product.name }}</h3>

    <h4 class="text-green-500 font-semibold mb-4 product-price" data-price="{{ product.price|default_if_none:0 }}">
      Rp {{ product.price|floatformat:0 }}
    </h4>

    <p class="text-gray-300 text-sm leading-relaxed mb-6 line-clamp-3">{{ product.description }}</p>

    <div class="border-t border-gray-700 pt-4 flex items-center justify-between">
      <a href="{% url 'main:show_product' product.id %}" class="text-green-500 hover:underline">Read more</a>
      <div class="text-sm">
        <a href="{% url 'main:edit_product' product.id %}" class="text-gray-400 hover:text-gray-200 mr-4">Edit</a>
        <a href="{% url 'main:delete_product' product.id %}" class="text-red-500 hover:underline">Delete</a>
      </div>
    </div>
  </div>
</article>

<script>
  // format all prices in cards to "Rp 200.000"
  (function () {
    const els = document.querySelectorAll('.product-price');
    els.forEach(function(el){
      const raw = el.dataset.price;
      const n = Number(raw) || 0;
      el.textContent = 'Rp ' + n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    });
  })();
</script>
